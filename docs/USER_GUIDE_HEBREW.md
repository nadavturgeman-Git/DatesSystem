# 📖 מדריך משתמש מפורט - מערכת ניהול תמרים

**גרסה**: 1.0  
**תאריך עדכון**: 2026-01-13  
**שפה**: עברית

---

## 📑 תוכן עניינים

1. [מבוא](#מבוא)
2. [התחברות למערכת](#התחברות-למערכת)
3. [לוח בקרה ראשי](#לוח-בקרה-ראשי)
4. [מודולי ניהול - מנהל](#מודולי-ניהול---מנהל)
5. [ניהול הזמנות](#ניהול-הזמנות)
6. [תפקידים והרשאות](#תפקידים-והרשאות)
7. [טיפים וטריקים](#טיפים-וטריקים)
8. [שאלות נפוצות](#שאלות-נפוצות)

---

## מבוא

### מהי מערכת ניהול תמרים?

מערכת ניהול תמרים היא מערכת מקיפה לניהול מלאי, הזמנות, מפיצים, לקוחות ועמלות עבור חוות תמרים. המערכת מספקת כלים מתקדמים לניהול מלאי לפי עקרון FIFO (First In, First Out), מעקב אחר ביצועים, ניהול עמלות מפיצים, ועוד.

### מי יכול להשתמש במערכת?

המערכת תומכת בשלושה סוגי משתמשים:

1. **מנהל (Admin)** - גישה מלאה לכל המודולים והפונקציות
2. **ראש צוות (Team Leader)** - ניהול מפיצים וצפייה בהזמנות
3. **מפיץ (Distributor)** - יצירת הזמנות וצפייה בהזמנות אישיות

---

## התחברות למערכת

### התחברות ראשונה

1. פתח את הדפדפן ונווט לכתובת: `http://localhost:3000/login`
2. הזן את כתובת האימייל והסיסמה שלך
3. לחץ על "התחבר"

### התחברות עם Google

1. לחץ על כפתור "התחבר עם Google"
2. בחר את חשבון Google שלך
3. המערכת תיצור עבורך פרופיל אוטומטית

### יצירת חשבון חדש

1. נווט לדף ההרשמה: `http://localhost:3000/signup`
2. מלא את הפרטים:
   - כתובת אימייל
   - סיסמה (מינימום 6 תווים)
   - שם מלא
3. לחץ על "הירשם"

**הערה**: חשבונות חדשים נוצרים כברירת מחדל כמפיצים. מנהל יכול לשנות את התפקיד מאוחר יותר.

---

## לוח בקרה ראשי

### גישה ללוח הבקרה

לאחר התחברות, תועבר אוטומטית ללוח הבקרה הראשי (`/dashboard`).

### מה תראה בלוח הבקרה?

1. **סטטיסטיקות מהירות**:
   - מלאי כולל (ק"ג)
   - מספר הזמנות פעילות
   - מחסנים פעילים
   - מוצרים פעילים

2. **קישורים מהירים**:
   - יצירת הזמנה חדשה
   - צפייה בהזמנות
   - גישה למודולי ניהול (למנהלים בלבד)

### לוח בקרה למנהל

מנהלים יראו לוח בקרה מורחב עם:
- סטטיסטיקות מפורטות
- קישורים לכל מודולי הניהול
- התראות מערכת
- דוחות מהירים

---

## מודולי ניהול - מנהל

> **חשוב**: מודולים אלה זמינים רק למשתמשים עם תפקיד "מנהל" (Admin).

### 1. 📦 ניהול מלאי (`/admin/inventory`)

#### מה אפשר לעשות כאן?

- **צפייה בפלטות**: רשימה מלאה של כל הפלטות במערכת
- **סינון**: לפי מחסן, מוצר, או סטטוס (ריק/מלא)
- **הוספת פלטות**: יצירת פלטות חדשות עם פרטים מלאים
- **מעקב אחר משקלים**: מעקב אחר משקל התחלתי ונוכחי

#### איך להוסיף פלטה חדשה?

1. לחץ על כפתור "+ הוסף פלטה חדשה"
2. מלא את הפרטים:
   - **מספר פלטה**: מזהה ייחודי (למשל: PLT-001)
   - **מחסן**: בחר מהרשימה
   - **מוצר**: בחר מהרשימה
   - **משקל התחלתי**: בק"ג
   - **מספר אצווה**: (אופציונלי)
   - **תאריך תפוגה**: (אופציונלי)
3. לחץ על "שמור"

#### סינון פלטות

- **לפי מחסן**: בחר מחסן ספציפי
- **לפי מוצר**: בחר מוצר ספציפי
- **הצג פלטות ריקות**: סמן כדי לראות גם פלטות ריקות

---

### 2. 🌴 ניהול מוצרים (`/admin/products`)

#### מה אפשר לעשות כאן?

- **צפייה במוצרים**: רשימת כל המוצרים במערכת
- **הוספת מוצרים**: יצירת מוצרים חדשים
- **עריכת מוצרים**: עדכון מחירים ופרטים
- **הפעלה/השבתה**: שליטה במוצרים פעילים

#### איך להוסיף מוצר חדש?

1. לחץ על "+ הוסף מוצר חדש"
2. מלא את הפרטים:
   - **שם מוצר**: למשל "תמר מג'הול"
   - **זן**: למשל "Medjool"
   - **מחיר לק"ג**: בשקלים
   - **סטטוס**: פעיל/לא פעיל
3. לחץ על "שמור"

---

### 3. 🏭 ניהול מחסנים (`/admin/warehouses`)

#### מה אפשר לעשות כאן?

- **צפייה במחסנים**: רשימת כל המחסנים
- **הוספת מחסנים**: יצירת מחסנים חדשים
- **עריכת מחסנים**: עדכון קיבולת ופרטים
- **ניהול סוגי מחסנים**: הקפאה או קירור

#### איך להוסיף מחסן חדש?

1. לחץ על "+ הוסף מחסן חדש"
2. מלא את הפרטים:
   - **שם מחסן**: למשל "מחסן ירושלים"
   - **מיקום**: כתובת או אזור
   - **סוג**: הקפאה או קירור
   - **קיבולת**: בק"ג
   - **סטטוס**: פעיל/לא פעיל
3. לחץ על "שמור"

---

### 4. 👥 ניהול מפיצים (`/admin/distributors`)

#### מה אפשר לעשות כאן?

- **צפייה במפיצים**: רשימת כל המפיצים וראשי הצוותים
- **הוספת מפיצים**: יצירת משתמשים חדשים
- **עריכת מפיצים**: עדכון פרטים, הרשאות, ועמלות
- **ניהול ראשי צוות**: הקצאת מפיצים לראשי צוותים

#### איך להוסיף מפיץ חדש?

1. לחץ על "+ הוסף מפיץ חדש"
2. מלא את הפרטים:
   - **שם מלא**
   - **אימייל**
   - **טלפון**
   - **תפקיד**: מפיץ או ראש צוות
   - **ראש צוות**: (אם מפיץ) בחר ראש צוות
3. לחץ על "שמור"

#### ניהול עמלות

בדף המפיץ תוכל:
- **להגדיר שיעור עמלה**: אחוז מהזמנות
- **לבחור סוג תשלום**: מזומן או מוצרים
- **לצפות ביתרה**: יתרת חשבון של המפיץ

---

### 5. 👤 ניהול לקוחות (`/admin/customers`)

#### מה אפשר לעשות כאן?

- **צפייה בלקוחות**: רשימת כל הלקוחות
- **חיפוש**: לפי שם, טלפון, או אימייל
- **הוספת לקוחות**: יצירת לקוחות חדשים
- **עריכת לקוחות**: עדכון פרטים
- **ניהול רכזים**: הקצאת לקוחות לרכזים

#### איך להוסיף לקוח חדש?

1. לחץ על "+ הוסף לקוח חדש"
2. מלא את הפרטים:
   - **שם מלא**
   - **טלפון** (חובה)
   - **אימייל** (אופציונלי)
   - **כתובת** (אופציונלי)
   - **רכז**: בחר רכז מהרשימה
   - **הערות** (אופציונלי)
3. לחץ על "שמור"

---

### 6. 💰 דוחות ועמלות (`/admin/commissions`)

#### מה אפשר לעשות כאן?

- **צפייה בעמלות**: כל העמלות במערכת
- **סינון**: לפי סוג (מפיץ/ראש צוות), סטטוס תשלום, סוג תשלום
- **סמן כשולם**: עדכון סטטוס תשלום
- **דוחות**: סטטיסטיקות על עמלות

#### איך לסמן עמלה כשולמה?

1. מצא את העמלה ברשימה
2. לחץ על כפתור "סמן כשולם"
3. העמלה תסומן כשולמה ותאריך התשלום יתעדכן

#### סוגי תשלום

- **מזומן**: תשלום כספי
- **מוצרים**: תשלום במוצרים (תמרים)

---

### 7. 🚚 דפי משלוח (`/admin/delivery-sheets`)

#### מה אפשר לעשות כאן?

- **צפייה בדפי משלוח**: כל דפי המשלוח שנוצרו
- **יצירת דף משלוח**: יצירת דף משלוח חדש לנהג
- **הוספת פריטים**: הוספת הזמנות לדף המשלוח
- **סמן כהושלם**: עדכון סטטוס משלוח

#### איך ליצור דף משלוח?

1. לחץ על "+ צור דף משלוח חדש"
2. מלא את הפרטים:
   - **שם נהג**: (אופציונלי)
   - **תאריך משלוח**: תאריך המשלוח
   - **מלאי חלופי**: כמות חלופית לנהג (ק"ג)
   - **הערות**: (אופציונלי)
3. הוסף פריטי משלוח:
   - לחץ על "+ הוסף פריט"
   - בחר מפיץ, מוצר, וכמות
   - חזור על הפעולה לכל פריט
4. לחץ על "שמור"

---

### 8. ↩️ החזרות ונזקים (`/admin/returns`)

#### מה אפשר לעשות כאן?

- **צפייה בהחזרות**: כל ההחזרות במערכת
- **אישור החזרות**: אישור או דחיית החזרות
- **סינון**: לפי סטטוס או סיבת החזרה
- **ניהול זיכויים**: העברת זיכויים ליתרת המפיץ

#### איך לאשר החזרה?

1. מצא את ההחזרה ברשימה
2. בדוק את הפרטים:
   - כמות (ק"ג)
   - סכום זיכוי
   - סיבת החזרה
   - תיאור
3. לחץ על "אשר החזרה"
4. הזיכוי יועבר אוטומטית ליתרת המפיץ (אם נבחר "יועבר ליתרה")

#### סיבות החזרה

- **נזק**: מוצר ניזוק
- **איסוף חסר**: לא נאסף בזמן
- **בעיית איכות**: בעיה באיכות המוצר
- **אחר**: סיבה אחרת

---

### 9. 🔔 התראות (`/admin/alerts`)

#### מה אפשר לעשות כאן?

- **צפייה בהתראות**: כל ההתראות במערכת
- **סמן כנקרא**: עדכון סטטוס קריאה
- **סמן כנפתר**: עדכון סטטוס פתרון
- **סינון**: לפי סוג התראה

#### סוגי התראות

1. **ביצועים נמוכים**: מפיץ לא עמד ב-50 ק"ג
2. **אזהרת קלקול**: מוצר במחסן קירור מעל 7 ימים
3. **מלאי נמוך**: מלאי נמוך מדי
4. **הזמנה פגה**: הזמנה לא שולמה בזמן

#### איך לטפל בהתראה?

1. קרא את התראה
2. לחץ על "סמן כנקרא" אם טיפלת בה
3. לחץ על "סמן כנפתר" אם פתרת את הבעיה

---

### 10. 📊 ביצועים ומדדים (`/admin/performance`)

#### מה אפשר לעשות כאן?

- **צפייה בביצועים**: מדדי ביצוע של כל המפיצים
- **מעקב כלל 50 ק"ג**: מי עמד במינימום ומי לא
- **סטטיסטיקות**: משקל כולל, הכנסות, מספר הזמנות
- **סינון**: לפי מפיץ או סטטוס כלל 50 ק"ג

#### מה זה כלל 50 ק"ג?

כל מפיץ צריך למכור מינימום 50 ק"ג בכל מחזור מכירה. המערכת עוקבת אחר זה אוטומטית.

#### איך לקרוא את הטבלה?

- **מפיץ**: שם המפיץ
- **תקופת מכירה**: תאריכי המחזור
- **משקל כולל**: סה"כ ק"ג שנמכרו
- **מספר הזמנות**: כמה הזמנות במחזור
- **הכנסות**: סכום כולל במחזור
- **כלל 50 ק"ג**: ✓ עמד / ✗ לא עמד

---

### 11. 🔄 מחזורי מכירה (`/admin/sales-cycles`)

#### מה אפשר לעשות כאן?

- **צפייה במחזורים**: כל מחזורי המכירה
- **יצירת מחזור**: יצירת מחזור מכירה חדש
- **עריכת מחזור**: עדכון תאריכים ופרטים
- **הפעלה/השבתה**: שליטה במחזור הפעיל

#### איך ליצור מחזור מכירה?

1. לחץ על "+ צור מחזור חדש"
2. מלא את הפרטים:
   - **שם מחזור**: למשל "מחזור ינואר 2026"
   - **תאריך התחלה**: תאריך תחילת המחזור
   - **תאריך סיום**: תאריך סיום המחזור
   - **מינימום הזמנה**: מינימום ק"ג להזמנה (ברירת מחדל: 50)
   - **מחזור פעיל**: סמן אם זה המחזור הפעיל
   - **הערות**: (אופציונלי)
3. לחץ על "שמור"

**חשוב**: רק מחזור אחד יכול להיות פעיל בכל זמן!

---

## ניהול הזמנות

### יצירת הזמנה חדשה

1. נווט ל-`/orders/new` או לחץ על "+ הזמנה חדשה"
2. בחר מוצר מהרשימה
3. הזן כמות (ק"ג)
4. לחץ על "צפה בהקצאה" כדי לראות אילו פלטות יוקצו (FIFO)
5. בדוק את הפרטים:
   - פלטות שיוקצו
   - סכום כולל
   - עמלה (אם רלוונטי)
6. לחץ על "צור הזמנה"

### צפייה בהזמנות

1. נווט ל-`/orders`
2. תראה רשימה של כל ההזמנות שלך
3. לחץ על הזמנה כדי לראות פרטים מלאים

### פרטי הזמנה

בדף פרטי הזמנה תראה:
- **מספר הזמנה**
- **סטטוס**: ממתין, מאושר, ארוז, נשלח, נמסר, בוטל
- **סטטוס תשלום**: ממתין, שולם, נכשל, הוחזר
- **פרטי פלטות**: אילו פלטות הוקצו
- **סכום כולל**
- **עמלה**: אם רלוונטי

---

## תפקידים והרשאות

### מנהל (Admin)

**גישה מלאה**:
- כל מודולי הניהול
- יצירת ועריכת משתמשים
- ניהול מלאי, מוצרים, מחסנים
- אישור החזרות
- ניהול עמלות
- יצירת דפי משלוח
- צפייה בכל ההזמנות

### ראש צוות (Team Leader)

**גישה מוגבלת**:
- צפייה במפיצים שלו
- צפייה בהזמנות של המפיצים שלו
- יצירת הזמנות
- צפייה בעמלות שלו

### מפיץ (Distributor)

**גישה בסיסית**:
- יצירת הזמנות
- צפייה בהזמנות שלו
- צפייה בעמלות שלו
- צפייה ביתרה שלו

---

## טיפים וטריקים

### 1. שימוש בסינון

רוב המודולים כוללים אפשרויות סינון. השתמש בהם כדי למצוא במהירות את מה שאתה מחפש.

### 2. חיפוש מהיר

במודולים עם חיפוש (כמו לקוחות), השתמש בחיפוש כדי למצוא במהירות רשומות.

### 3. עדכון נתונים

לחץ על כפתור "רענן" כדי לעדכן את הנתונים מהשרת.

### 4. יצירת דוחות

במודול דוחות ועמלות, תוכל לראות סטטיסטיקות מהירות על כל העמלות.

### 5. מעקב אחר התראות

בדוק את מודול התראות באופן קבוע כדי להישאר מעודכן על בעיות במערכת.

---

## שאלות נפוצות

### איך משנים תפקיד של משתמש?

1. לך למודול "ניהול מפיצים"
2. מצא את המשתמש
3. לחץ על "ערוך"
4. שנה את התפקיד
5. שמור

### מה זה FIFO?

FIFO (First In, First Out) הוא עקרון ניהול מלאי שבו הפלטות הישנות ביותר נמכרות ראשונות. זה עוזר למנוע קלקול.

### איך מעדכנים מחיר מוצר?

1. לך למודול "ניהול מוצרים"
2. מצא את המוצר
3. לחץ על "ערוך"
4. עדכן את המחיר
5. שמור

### מה קורה אם הזמנה לא שולמה?

הזמנות שלא שולמו תישארנה במצב "ממתין תשלום". המערכת תציג התראה אם הזמנה לא שולמה בזמן.

### איך יוצרים דף משלוח?

1. לך למודול "דפי משלוח"
2. לחץ על "+ צור דף משלוח חדש"
3. מלא את הפרטים והוסף פריטים
4. שמור

### מה זה "מלאי חלופי" בדף משלוח?

זה מלאי נוסף שהנהג יכול לקחת למקרה של בעיות או הזמנות נוספות.

---

## תמיכה ועזרה

### בעיות טכניות?

אם נתקלת בבעיה:
1. בדוק את הקונסול בדפדפן (F12)
2. בדוק את ה-network requests
3. וודא שאתה מחובר
4. נסה לרענן את הדף

### שאלות נוספות?

עיין במסמכים הבאים:
- `CURRENT_WORK.md` - סטטוס נוכחי של הפרויקט
- `MODULES_STATUS.md` - סטטוס המודולים
- `supabase-schema.sql` - מבנה מסד הנתונים

---

## סיכום

מערכת ניהול תמרים היא כלי חזק לניהול מלא של חוות תמרים. עם כל המודולים והתכונות הזמינים, תוכל לנהל בצורה יעילה את המלאי, ההזמנות, המפיצים, והעמלות.

**זכור**: אם אתה מנהל, יש לך גישה מלאה לכל המודולים. אם אתה מפיץ או ראש צוות, הגישה שלך מוגבלת לפי התפקיד שלך.

**בהצלחה!** 🎉

---

**עודכן לאחרונה**: 2026-01-13  
**גרסה**: 1.0
